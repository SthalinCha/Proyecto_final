<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de An√°lisis de Im√°genes</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header con filtros y controles -->
    <header class="main-header">
        <div class="container">
            <h1 class="app-title">
                <span class="icon">üñºÔ∏è</span>
                Sistema de An√°lisis de Im√°genes
            </h1>
            
            <!-- Controles principales -->
            <div class="controls-section">
                <!-- Filtros -->
                <div class="filters-container">
                    <div class="filter-group">
                        <label for="tag-filter">Filtrar por etiqueta:</label>
                        <select id="tag-filter" class="filter-select">
                            <option value="">Todas las etiquetas</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="method-filter">M√©todo de an√°lisis:</label>
                        <select id="method-filter" class="filter-select">
                            <option value="">Todos los m√©todos</option>
                            <option value="moments">Momentos Regulares</option>
                            <option value="hu">Momentos de Hu</option>
                            <option value="zernike">Momentos de Zernike</option>
                            <option value="sift">SIFT</option>
                            <option value="hog">HOG</option>
                            <option value="cnn">CNN</option>
                        </select>
                    </div>
                    
                    <button id="clear-filters" class="btn btn-secondary">
                        Limpiar filtros
                    </button>
                </div>
                
                <!-- Bot√≥n para abrir modal de subida -->
                <button id="upload-btn" class="btn btn-primary">
                    <span class="icon">üì§</span>
                    Subir Im√°genes
                </button>
            </div>
        </div>
    </header>

    <!-- Secci√≥n principal -->
    <main class="main-content">
        <div class="container">
            <!-- Estad√≠sticas -->
            <section class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 class="stat-number" id="total-images">0</h3>
                        <p class="stat-label">Im√°genes totales</p>
                    </div>
                    <div class="stat-card">
                        <h3 class="stat-number" id="total-clusters">0</h3>
                        <p class="stat-label">Clusters generados</p>
                    </div>
                    <div class="stat-card">
                        <h3 class="stat-number" id="total-tags">0</h3>
                        <p class="stat-label">Etiquetas √∫nicas</p>
                    </div>
                </div>
            </section>

            <!-- Galer√≠a de im√°genes -->
            <section class="gallery-section">
                <div class="section-header">
                    <h2>Galer√≠a de Im√°genes</h2>
                    <div class="view-controls">
                        <button id="grid-view" class="view-btn active" title="Vista en cuadr√≠cula">
                            <span class="icon">‚äû</span>
                        </button>
                        <button id="list-view" class="view-btn" title="Vista en lista">
                            <span class="icon">‚â°</span>
                        </button>
                    </div>
                </div>
                
                <!-- Loading state -->
                <div id="loading-state" class="loading-state" style="display: none;">
                    <div class="spinner"></div>
                    <p>Cargando im√°genes...</p>
                </div>
                
                <!-- Estado vac√≠o -->
                <div id="empty-state" class="empty-state" style="display: none;">
                    <div class="empty-icon">üìÇ</div>
                    <h3>No hay im√°genes</h3>
                    <p>Sube algunas im√°genes para comenzar el an√°lisis</p>
                    <button class="btn btn-primary" onclick="document.getElementById('upload-btn').click()">
                        Subir primera imagen
                    </button>
                </div>
                
                <!-- Grid de im√°genes -->
                <div id="images-grid" class="images-grid">
                    <!-- Las im√°genes se generar√°n din√°micamente aqu√≠ -->
                </div>
            </section>
        </div>
    </main>

    <!-- Modal de subida de im√°genes -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Subir Im√°genes</h2>
                <button class="modal-close" id="upload-modal-close">&times;</button>
            </div>
            
            <form id="upload-form" class="upload-form">
                <!-- Configuraci√≥n del an√°lisis -->
                <div class="form-section">
                    <h3>Configuraci√≥n del An√°lisis</h3>
                    
                    <div class="form-group">
                        <label for="analysis-method">M√©todo de an√°lisis:</label>
                        <select id="analysis-method" name="method" required>
                            <option value="moments">Momentos Regulares</option>
                            <option value="hu">Momentos de Hu</option>
                            <option value="zernike">Momentos de Zernike</option>
                            <option value="sift">SIFT</option>
                            <option value="hog">HOG</option>
                            <option value="cnn">CNN</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="num-clusters">N√∫mero de clases (k):</label>
                        <input type="number" id="num-clusters" name="clusters" min="1" max="20" value="3">
                        <small class="form-help">N√∫mero de clusters para el an√°lisis autom√°tico</small>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="has-labels" name="hasLabels">
                            Las im√°genes tienen etiquetas predefinidas
                        </label>
                    </div>
                </div>
                
                <!-- √Årea de subida de archivos -->
                <div class="form-section">
                    <h3>Seleccionar Im√°genes</h3>
                    
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">üì§</div>
                        <p>Arrastra im√°genes aqu√≠ o <button type="button" class="link-btn" id="browse-files">selecciona archivos</button></p>
                        <small>Formatos soportados: JPG, PNG, GIF ‚Ä¢ M√°ximo 10MB por archivo</small>
                        <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
                    </div>
                    
                    <!-- √Årea de etiquetas condicional -->
                    <div id="labels-section" class="labels-section" style="display: none;">
                        <h4>Asignar Etiquetas</h4>
                        <div id="files-with-labels" class="files-with-labels">
                            <!-- Se generar√° din√°micamente para cada archivo -->
                        </div>
                    </div>
                    
                    <!-- Vista previa de archivos -->
                    <div id="files-preview" class="files-preview">
                        <!-- Se generar√° din√°micamente -->
                    </div>
                </div>
                
                <!-- Botones de acci√≥n -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-upload">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary" id="submit-upload" disabled>
                        <span class="icon">üöÄ</span>
                        Procesar Im√°genes
                    </button>
                </div>
                
                <!-- Barra de progreso -->
                <div id="upload-progress" class="progress-section" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p id="progress-text">Procesando...</p>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de comparaci√≥n de im√°genes -->
    <div id="comparison-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 id="comparison-title">Comparaci√≥n de Imagen</h2>
                <button class="modal-close" id="comparison-modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <!-- Tabs de navegaci√≥n -->
                <div class="tabs-container">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="original">Original</button>
                        <button class="tab-btn" data-tab="grayscale">Escala de Grises</button>
                        <button class="tab-btn" data-tab="binary">Binaria</button>
                        <button class="tab-btn" data-tab="comparison">Comparaci√≥n</button>
                    </div>
                </div>
                
                <!-- Contenido de las pesta√±as -->
                <div class="tab-content">
                    <!-- Pesta√±a Original -->
                    <div class="tab-pane active" id="tab-original">
                        <div class="image-container">
                            <img id="original-image" alt="Imagen original">
                        </div>
                        <div class="image-info">
                            <h4>Informaci√≥n de la Imagen</h4>
                            <p><strong>Nombre:</strong> <span id="image-name"></span></p>
                            <p><strong>Etiqueta:</strong> <span id="image-tag"></span></p>
                            <p><strong>M√©todo:</strong> <span id="image-method"></span></p>
                            <p><strong>Cluster:</strong> <span id="image-cluster"></span></p>
                        </div>
                    </div>
                    
                    <!-- Pesta√±a Escala de Grises -->
                    <div class="tab-pane" id="tab-grayscale">
                        <div class="image-container">
                            <img id="grayscale-image" alt="Imagen en escala de grises">
                        </div>
                    </div>
                    
                    <!-- Pesta√±a Binaria -->
                    <div class="tab-pane" id="tab-binary">
                        <div class="image-container">
                            <img id="binary-image" alt="Imagen binaria">
                        </div>
                    </div>
                    
                    <!-- Pesta√±a Comparaci√≥n -->
                    <div class="tab-pane" id="tab-comparison">
                        <div class="comparison-grid">
                            <div class="comparison-item">
                                <h4>Original</h4>
                                <img id="comp-original" alt="Original">
                            </div>
                            <div class="comparison-item">
                                <h4>Escala de Grises</h4>
                                <img id="comp-grayscale" alt="Escala de grises">
                            </div>
                            <div class="comparison-item">
                                <h4>Binaria</h4>
                                <img id="comp-binary" alt="Binaria">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts con defer para carga despu√©s del DOM -->
    <script src="js/utils.js" defer></script>
    <script src="js/upload.js" defer></script>
    <script src="js/gallery.js" defer></script>
    <script src="js/modal.js" defer></script>
    <script src="js/app.js" defer></script>
</body>
</html>