<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de AnÃ¡lisis de ImÃ¡genes</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <!-- MenÃº lateral izquierdo -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h1>Sistema de AnÃ¡lisis</h1>
            <p class="subtitle">Procesamiento de ImÃ¡genes</p>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="#gallery" class="nav-item active" data-view="gallery">
                        <span class="icon">ğŸ–¼ï¸</span>
                        <span class="text">GalerÃ­a</span>
                    </a>
                </li>
                <li>
                    <a href="#moments" class="nav-item disabled" data-view="moments">
                        <span class="icon">ğŸ“Š</span>
                        <span class="text">Momentos</span>
                    </a>
                </li>
                <li>
                    <a href="#hu" class="nav-item disabled" data-view="hu">
                        <span class="icon">ğŸ”¢</span>
                        <span class="text">Momentos de Hu</span>
                    </a>
                </li>
                <li>
                    <a href="#zernike" class="nav-item disabled" data-view="zernike">
                        <span class="icon">â­•</span>
                        <span class="text">Momentos de Zernike</span>
                    </a>
                </li>
                <li>
                    <a href="#sift" class="nav-item disabled" data-view="sift">
                        <span class="icon">ğŸ¯</span>
                        <span class="text">SIFT</span>
                    </a>
                </li>
                <li>
                    <a href="#hog" class="nav-item disabled" data-view="hog">
                        <span class="icon">ğŸ“</span>
                        <span class="text">HOG</span>
                    </a>
                </li>
                <li>
                    <a href="#cnn" class="nav-item disabled" data-view="cnn">
                        <span class="icon">ğŸ§ </span>
                        <span class="text">CNN</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <div class="sidebar-footer">
            <p>v2.0.0</p>
        </div>
    </aside>

    <!-- Panel derecho (contenido dinÃ¡mico) -->
    <main class="main-content">
        <!-- Vista de GalerÃ­a -->
        <div id="gallery-view" class="view active">
            <header class="view-header">
                <h2>GalerÃ­a de ImÃ¡genes</h2>
            </header>

            <!-- Ãrea de selecciÃ³n de imÃ¡genes -->
            <section class="upload-section">
                <div id="drop-zone" class="drop-zone">
                    <div class="drop-zone-content">
                        <span class="drop-icon">ğŸ“</span>
                        <h3>Arrastra y suelta imÃ¡genes aquÃ­</h3>
                        <p>o</p>
                        <label for="file-input" class="btn btn-primary">
                            Seleccionar archivos
                        </label>
                        <input 
                            type="file" 
                            id="file-input" 
                            accept="image/*" 
                            multiple 
                            style="display: none;"
                        >
                        <p class="hint">Formatos soportados: JPG, PNG, JPEG</p>
                    </div>
                </div>
            </section>

            <!-- Preview de imÃ¡genes seleccionadas -->
            <section id="preview-section" class="preview-section" style="display: none;">
                <div class="section-header">
                    <h3>ImÃ¡genes seleccionadas (<span id="preview-count">0</span>)</h3>
                    <button id="upload-btn" class="btn btn-primary btn-large">
                        â¬†ï¸ Cargar ImÃ¡genes
                    </button>
                </div>
                <div id="preview-container" class="preview-grid">
                    <!-- Preview de imÃ¡genes antes de subir -->
                </div>
            </section>

            <!-- Indicador de carga -->
            <div id="upload-progress" class="upload-progress" style="display: none;">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <p id="progress-text">Subiendo imÃ¡genes...</p>
            </div>

            <!-- GalerÃ­a de imÃ¡genes cargadas -->
            <section id="results-section" class="results-section" style="display: none;">
                <div class="section-header">
                    <h3>ImÃ¡genes procesadas (<span id="results-count">0</span>)</h3>
                    <button id="clear-all-btn" class="btn btn-danger" title="Elimina todas las imÃ¡genes permanentemente">
                        ğŸ—‘ï¸ Borrar Todas las ImÃ¡genes
                    </button>
                </div>
                <div id="results-container" class="results-grid">
                    <!-- ImÃ¡genes procesadas con 3 versiones -->
                </div>
            </section>
        </div>

        <!-- Vista de Momentos -->
        <div id="moments-view" class="view">
            <header class="view-header">
                <h2>MÃ³dulo de Momentos - Clustering</h2>
                <p class="view-description">Agrupa imÃ¡genes binarias en clusters con capacidades configurables</p>
            </header>

            <!-- Contador de imÃ¡genes disponibles -->
            <section class="gallery-status-section">
                <div class="status-card">
                    <div class="status-icon">ğŸ“Š</div>
                    <div class="status-info">
                        <h3>ImÃ¡genes Disponibles en GalerÃ­a</h3>
                        <div class="status-count">
                            <span id="moments-total-images" class="count-number">0</span>
                            <span class="count-label">imÃ¡genes binarias listas para procesar</span>
                        </div>
                        <button id="refresh-gallery-count" class="btn btn-secondary btn-sm">
                            ğŸ”„ Actualizar
                        </button>
                    </div>
                </div>
            </section>

            <!-- Panel de configuraciÃ³n -->
            <section class="config-section">
                <div class="config-card">
                    <h3>âš™ï¸ ConfiguraciÃ³n de Clustering</h3>
                    
                    <div class="form-group">
                        <label for="num-clusters">NÃºmero de Clusters:</label>
                        <input 
                            type="number" 
                            id="num-clusters" 
                            min="1" 
                            max="10" 
                            value="3" 
                            placeholder="Ej: 3"
                        >
                    </div>

                    <div class="form-group">
                        <label for="cluster-capacities">Capacidades por Cluster:</label>
                        <input 
                            type="text" 
                            id="cluster-capacities" 
                            placeholder="Ej: 10,20,5"
                        >
                        <small class="hint">Separar valores con comas. Debe coincidir con el nÃºmero de clusters.</small>
                    </div>

                    <div class="config-actions">
                        <button id="init-clustering-btn" class="btn btn-primary">
                            ğŸ’¾ Guardar ConfiguraciÃ³n
                        </button>
                    </div>
                </div>
            </section>

            <!-- Panel de acciones -->
            <section class="actions-section">
                <div class="actions-grid actions-grid-6">
                    <button id="init-clustering-btn-action" class="action-card disabled">
                        <span class="action-icon">ğŸš€</span>
                        <span class="action-title">Inicializar Clustering</span>
                        <span class="action-desc">Procesar todas las imÃ¡genes</span>
                    </button>

                    <button id="add-images-btn" class="action-card disabled">
                        <span class="action-icon">â•</span>
                        <span class="action-title">Agregar ImÃ¡genes</span>
                        <span class="action-desc">Subir mÃºltiples imÃ¡genes</span>
                    </button>

                    <button id="update-restrictions-btn" class="action-card disabled">
                        <span class="action-icon">ğŸ”„</span>
                        <span class="action-title">Actualizar Restricciones</span>
                        <span class="action-desc">Cambiar capacidades</span>
                    </button>

                    <button id="view-cluster-status-btn" class="action-card disabled">
                        <span class="action-icon">ğŸ“Š</span>
                        <span class="action-title">Ver Estado de Clusters</span>
                        <span class="action-desc">Ver mÃ©tricas y capacidades</span>
                    </button>

                    <button id="clear-clustering-btn" class="action-card disabled">
                        <span class="action-icon">ğŸ—‘ï¸</span>
                        <span class="action-title">Borrar Todo</span>
                        <span class="action-desc">Reiniciar mÃ³dulo</span>
                    </button>
                </div>
            </section>

            <!-- InformaciÃ³n de galerÃ­a -->
            <section id="gallery-info-section" class="config-section" style="display: none;">
                <div class="info-card">
                    <h4>ğŸ“Š ImÃ¡genes Disponibles</h4>
                    <p>Total en galerÃ­a: <strong id="total-gallery-images">0</strong> imÃ¡genes</p>
                </div>
            </section>

            <!-- Estado de clusters -->
            <section id="cluster-status-section" class="cluster-status-section" style="display: none;">
                <div class="section-header">
                    <h3>ğŸ“Š MÃ©tricas de EvaluaciÃ³n y Estado de Clusters</h3>
                </div>
                <div id="cluster-status-container" class="cluster-status-grid">
                    <!-- Estado de cada cluster y mÃ©tricas -->
                </div>
            </section>

            <!-- Resultados del clustering -->
            <section id="clustering-results-section" class="clustering-results-section" style="display: none;">
                <div class="section-header">
                    <h3>ğŸ¯ Clusters Resultantes</h3>
                </div>
                <div id="clustering-results-container" class="clustering-results-grid">
                    <!-- Clusters con sus imÃ¡genes -->
                </div>
            </section>

            <!-- Modal para agregar imÃ¡genes mÃºltiples -->
            <div id="add-images-modal" class="modal">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3>â• Agregar Nuevas ImÃ¡genes al Clustering</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="multi-drop-zone" class="drop-zone drop-zone-enhanced">
                            <div class="drop-zone-content">
                                <span class="drop-icon">ğŸ“¤</span>
                                <h4>Arrastra y suelta imÃ¡genes aquÃ­</h4>
                                <p class="drop-hint">o</p>
                                <label for="multi-file-input" class="btn btn-primary btn-large">
                                    ğŸ“ Seleccionar Archivos
                                </label>
                                <input 
                                    type="file" 
                                    id="multi-file-input" 
                                    accept="image/*"
                                    multiple
                                    style="display: none;"
                                >
                                <p class="format-hint">Formatos: JPG, PNG, JPEG (MÃºltiples archivos permitidos)</p>
                            </div>
                        </div>
                        <div id="multi-preview" class="modal-preview-grid" style="display: none;">
                            <!-- Preview de mÃºltiples imÃ¡genes -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="multi-cancel-btn" class="btn btn-secondary">Cancelar</button>
                        <button id="multi-upload-btn" class="btn btn-primary" disabled>â¬†ï¸ Subir <span id="upload-count">0</span> ImÃ¡genes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal para asignar imagen a cluster -->
            <div id="assign-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Asignar Imagen a Cluster EspecÃ­fico</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="assign-file-input">Seleccionar Imagen:</label>
                            <input 
                                type="file" 
                                id="assign-file-input" 
                                accept="image/*"
                            >
                        </div>
                        <div class="form-group">
                            <label for="target-cluster">Cluster Destino:</label>
                            <select id="target-cluster">
                                <!-- Opciones dinÃ¡micas -->
                            </select>
                        </div>
                        <div id="assign-preview" class="assign-preview" style="display: none;">
                            <!-- Preview de imagen -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="assign-cancel-btn" class="btn btn-secondary">Cancelar</button>
                        <button id="assign-confirm-btn" class="btn btn-primary" disabled>Asignar</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast de notificaciones -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/utils.js?v=10"></script>
    <script src="js/upload.js?v=10"></script>
    <script src="js/gallery.js?v=10"></script>
    <script src="js/moments.js?v=10"></script>
    <script src="js/app.js?v=10"></script>
</body>
</html>
